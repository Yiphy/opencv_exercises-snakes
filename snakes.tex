\documentclass[a4paper,12pt]{article}
\usepackage[utf8]{inputenc}
\usepackage[english]{babel}

\usepackage{graphicx}
\usepackage{amsmath}
\usepackage{hyperref}
\hypersetup{
    colorlinks=false,
    pdfborder={0 0 0},
}

\title{snakes}
\author{Alessandro Gentilini\thanks{alessandro.gentilini@gmail.com}}

\DeclareMathOperator*{\argmax}{arg\,max}


\begin{document}
\maketitle

\begin{abstract}
snakes
\end{abstract} 

\section{Inference for Snakes}
The likelihood is formula (17.3)
\begin{equation}
Pr(\mathbf{x}\vert\mathbf{W})\propto \prod_{n=1}^N \exp{[-(\text{dist}[\mathbf{x},\mathbf{w}_n])^2]}
\end{equation}

The prior is formula (17.4)
\begin{equation}
Pr(\mathbf{W})\propto \prod_{n=1}^N \exp{[\alpha \text{space}[\mathbf{w},n]+\beta \text{curve}[\mathbf{w},n]]}
\end{equation}

The inference is 
\begin{equation}
\argmax_{\mathbf{W}}[Pr(\mathbf{W}\vert\mathbf{x})] = 
\argmax_{\mathbf{W}}[Pr(\mathbf{x}\vert\mathbf{W})Pr(\mathbf{W})]
\end{equation}

Since $\log$ is monotone I can write
\begin{equation}
\begin{split}
\argmax_{\mathbf{W}}[Pr(\mathbf{W}\vert\mathbf{x})] & = 
\argmax_{\mathbf{W}}[\log{[Pr(\mathbf{W}\vert\mathbf{x})]}] \\
& = \argmax_{\mathbf{W}}[\log{[Pr(\mathbf{x}\vert\mathbf{W})Pr(\mathbf{W})]}] \\
& = \argmax_{\mathbf{W}}[\log{[Pr(\mathbf{x}\vert\mathbf{W})]}+\log{[Pr(\mathbf{W})]}]
\end{split}
\end{equation}

And so for what regard the likelihood I can write:
\begin{equation}
\begin{split}
\log{[Pr(\mathbf{x}\vert\mathbf{W})]} & \propto \log{[\prod_{n=1}^N \exp{[-(\text{dist}[\mathbf{x},\mathbf{w}_n])^2]}]} \\
& =\sum_{n=1}^N \log{[\exp{[-(\text{dist}[\mathbf{x},\mathbf{w}_n])^2]}]} \\
& =\sum_{n=1}^N -(\text{dist}[\mathbf{x},\mathbf{w}_n])^2
\end{split}
\end{equation}

And for what regard the prior I can write:
\begin{equation}
\begin{split}
\log{[Pr(\mathbf{W})]} & \propto \log{[\prod_{n=1}^N \exp{[\alpha \text{space}[\mathbf{w},n]+\beta \text{curve}[\mathbf{w},n]]}]} \\
& = \sum_{n=1}^N \log{[\exp{[\alpha \text{space}[\mathbf{w},n]+\beta \text{curve}[\mathbf{w},n]]}]} \\
& = \sum_{n=1}^N \alpha \text{space}[\mathbf{w},n]+\beta \text{curve}[\mathbf{w},n]
\end{split}
\end{equation}

And finally
\begin{equation}
\begin{split}
\argmax_{\mathbf{W}}[\log{[Pr(\mathbf{W}\vert\mathbf{x})]}] = \argmax_{\mathbf{W}}[\sum_{n=1}^N -(\text{dist}[\mathbf{x},\mathbf{w}_n])^2+\alpha \text{space}[\mathbf{w},n]+\beta \text{curve}[\mathbf{w},n]]\\
\end{split}
\end{equation}


\end{document}
